<!DOCTYPE html>
<html>
<head>
<title>User Authentication</title>

<style>
body{
    background:#0b1120;
    color:white;
    font-family:Segoe UI;
    text-align:center;
    padding:40px;
}

h2{
    background:linear-gradient(90deg,#f59e0b,#65a30d);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
}

.section{
    margin:30px auto;
    width:320px;
    height:220px;
    display:flex;
    justify-content:center;
    align-items:center;
}

video{
    width:100%;
    height:100%;
    border-radius:15px;
    object-fit:cover;
}

.voice-box{
    width:100%;
    height:200px;
    display:flex;
    justify-content:center;
    align-items:flex-end;
    gap:8px;
}

.bar{
    width:8px;
    height:40px;
    background:linear-gradient(to top,#f59e0b,#65a30d);
    border-radius:4px;
    animation:equalize 1s infinite ease-in-out;
}

.bar:nth-child(1){animation-delay:0.1s;}
.bar:nth-child(2){animation-delay:0.2s;}
.bar:nth-child(3){animation-delay:0.3s;}
.bar:nth-child(4){animation-delay:0.4s;}
.bar:nth-child(5){animation-delay:0.5s;}
.bar:nth-child(6){animation-delay:0.6s;}

@keyframes equalize{
    0%{height:30px;}
    50%{height:120px;}
    100%{height:30px;}
}

.fingerprint{
    width:150px;
    height:150px;
    border-radius:50%;
    border:3px solid #f59e0b;
    display:flex;
    justify-content:center;
    align-items:center;
    animation:scan 2s infinite linear;
    font-size:40px;
}

@keyframes scan{
    0%{box-shadow:0 0 10px #f59e0b;}
    50%{box-shadow:0 0 30px #65a30d;}
    100%{box-shadow:0 0 10px #f59e0b;}
}

button{
    padding:12px 25px;
    border:none;
    border-radius:8px;
    background:linear-gradient(90deg,#f59e0b,#65a30d);
    color:white;
    cursor:pointer;
    margin-top:20px;
    transition:0.3s;
}

button:hover{
    box-shadow:0 0 15px rgba(245,158,11,0.5);
}

.hidden{display:none;}

</style>
</head>

<body>

<h2>Multi Layer Authentication</h2>
<h3 id="stepTitle">Step 1: Face Recognition</h3>

<div class="section" id="faceBox">
    <video id="video" autoplay></video>
</div>

<div class="section hidden" id="voiceBox">
    <div class="voice-box">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
    </div>
</div>

<div class="section hidden" id="fingerprintBox">
    <div class="fingerprint">üîê</div>
</div>

<button onclick="nextStep()" id="authBtn">Authenticate</button>

<p id="status"></p>

<script>
let currentStep=1;

navigator.mediaDevices.getUserMedia({video:true})
.then(stream=>{
    document.getElementById("video").srcObject=stream;
});

function nextStep(){

    let stepName="";
    if(currentStep===1) stepName="Face Recognition";
    if(currentStep===2) stepName="Voice Verification";
    if(currentStep===3) stepName="Fingerprint Scan";

    document.getElementById("status").innerHTML="Processing "+stepName+"...";

    setTimeout(()=>{

        let success=Math.random()>0.3;
        saveLog(stepName,success);

        if(success){
            currentStep++;

            if(currentStep===2){
                faceBox.classList.add("hidden");
                voiceBox.classList.remove("hidden");
                stepTitle.innerHTML="Step 2: Voice Verification";
            }
            else if(currentStep===3){
                voiceBox.classList.add("hidden");
                fingerprintBox.classList.remove("hidden");
                stepTitle.innerHTML="Step 3: Fingerprint Scan";
            }
            else{
                unlockDoor();
            }

        }else{
            document.getElementById("status").innerHTML="Failed ‚ùå Restarting...";
            setTimeout(resetSystem,1500);
        }

    },2000);
}

function unlockDoor(){
    document.getElementById("status").innerHTML="ACCESS GRANTED ‚úî Door Unlocked";
    document.getElementById("authBtn").disabled=true;

    setTimeout(()=>{
        window.location.href="index.html";
    },2000);
}

function saveLog(step,success){
    let logs=JSON.parse(localStorage.getItem("auditLogs"))||[];
    logs.push({
        time:new Date().toLocaleString(),
        step:step,
        status:success?"Success":"Failed"
    });
    localStorage.setItem("auditLogs",JSON.stringify(logs));
}

function resetSystem(){
    currentStep=1;
    faceBox.classList.remove("hidden");
    voiceBox.classList.add("hidden");
    fingerprintBox.classList.add("hidden");
    stepTitle.innerHTML="Step 1: Face Recognition";
}
</script>

</body>
</html>
